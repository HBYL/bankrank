{% extends "base.html" %}
{% block title %}企业信息 - 银行对公信用评估业务系统{% endblock %}

{% block enterprise_content %}
<div class="mb-6">
    <h2 class="text-2xl font-bold text-slate-800">企业信息管理</h2>
    <p class="text-slate-500 mt-1">维护您的企业基本资料</p>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <!-- 企业信息表单 -->
    <div class="card lg:col-span-2">
        <h3 class="text-lg font-semibold text-slate-800 mb-4"><i class="fa fa-edit text-sky-500 mr-2"></i>基本信息</h3>
        <form method="POST" enctype="multipart/form-data">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                    <label class="block text-slate-600 text-sm font-medium mb-2">企业名称</label>
                    <input type="text" name="company_name" value="{{ enterprise.company_name or '' }}" class="input-field" placeholder="请输入企业全称" required>
                </div>
                <div>
                    <label class="block text-slate-600 text-sm font-medium mb-2">统一社会信用代码</label>
                    <input type="text" name="credit_code" value="{{ enterprise.credit_code or '' }}" maxlength="18" class="input-field" placeholder="18位信用代码">
                </div>
                <div>
                    <label class="block text-slate-600 text-sm font-medium mb-2">法定代表人</label>
                    <input type="text" name="legal_person" value="{{ enterprise.legal_person or '' }}" class="input-field" placeholder="请输入法人姓名">
                </div>
                <div>
                    <label class="block text-slate-600 text-sm font-medium mb-2">注册资本（万元）</label>
                    <input type="number" name="registered_capital" value="{{ enterprise.registered_capital or '' }}" step="0.01" class="input-field" placeholder="请输入注册资本">
                </div>
                <div>
                    <label class="block text-slate-600 text-sm font-medium mb-2">所属行业</label>
                    <select name="industry" class="input-field">
                        <option value="">请选择行业</option>
                        <option value="finance" {% if enterprise.industry == 'finance' %}selected{% endif %}>金融业</option>
                        <option value="technology" {% if enterprise.industry == 'technology' %}selected{% endif %}>科技/互联网</option>
                        <option value="manufacturing" {% if enterprise.industry == 'manufacturing' %}selected{% endif %}>制造业</option>
                        <option value="retail" {% if enterprise.industry == 'retail' %}selected{% endif %}>零售业</option>
                        <option value="construction" {% if enterprise.industry == 'construction' %}selected{% endif %}>建筑业</option>
                        <option value="other" {% if enterprise.industry == 'other' %}selected{% endif %}>其他</option>
                    </select>
                </div>
                <div>
                    <label class="block text-slate-600 text-sm font-medium mb-2">营业执照</label>
                    <input type="file" name="business_license" accept="image/*" class="input-field">
                </div>
                <div class="md:col-span-2">
                    <label class="block text-slate-600 text-sm font-medium mb-2">企业地址</label>
                    <input type="text" name="address" value="{{ enterprise.address or '' }}" class="input-field" placeholder="请输入详细地址">
                </div>
            </div>
            <div class="mt-6">
                <button type="submit" class="btn-primary"><i class="fa fa-save mr-2"></i>保存信息</button>
            </div>
        </form>
    </div>
    
    <!-- 审核状态 -->
    <div class="card">
        <h3 class="text-lg font-semibold text-slate-800 mb-4"><i class="fa fa-check-circle text-sky-500 mr-2"></i>审核状态</h3>
        
        <div class="mb-6">
            <p class="text-slate-600 text-sm mb-2">营业执照审核</p>
            {% if enterprise.license_status == 1 %}
            <div class="flex items-center text-emerald-600">
                <i class="fa fa-check-circle mr-2"></i>
                <span>已通过审核</span>
            </div>
            {% elif enterprise.license_status == 2 %}
            <div class="flex items-center text-red-600">
                <i class="fa fa-times-circle mr-2"></i>
                <span>审核未通过</span>
            </div>
            {% if enterprise.review_comment %}
            <p class="text-sm text-slate-500 mt-2">原因: {{ enterprise.review_comment }}</p>
            {% endif %}
            {% else %}
            <div class="flex items-center text-amber-600">
                <i class="fa fa-clock-o mr-2"></i>
                <span>{% if enterprise.business_license %}待审核{% else %}未上传{% endif %}</span>
            </div>
            {% endif %}
        </div>
        
        {% if enterprise.business_license %}
        <div>
            <p class="text-slate-600 text-sm mb-2">已上传的营业执照</p>
            <img src="{{ url_for('static', filename='uploads/' + enterprise.business_license) }}" alt="营业执照" class="w-full rounded-lg border border-slate-200">
        </div>
        {% endif %}
        
        <div class="mt-6 p-4 bg-sky-50 rounded-lg">
            <h4 class="text-sm font-medium text-sky-700 mb-2"><i class="fa fa-info-circle mr-1"></i>温馨提示</h4>
            <ul class="text-xs text-slate-600 space-y-1">
                <li>• 请确保上传的营业执照图片清晰可辨</li>
                <li>• 统一社会信用代码必须为18位</li>
                <li>• 信息变更后需重新审核</li>
                <li>• 审核通过后方可申请贷款</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %}
